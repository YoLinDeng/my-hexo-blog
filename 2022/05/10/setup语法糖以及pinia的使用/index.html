

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=&#34;auto&#34;>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/my-hexo-blog/img/lampbulb.png">
  <link rel="icon" type="image/png" href="/my-hexo-blog/img/lampbulb.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="YoLinDeng blog">
  <meta name="author" content="YoLin Deng">
  <meta name="keywords" content="">
  <title>setup语法糖以及pinia的使用 - YoLinDeng&#39;s blog</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/my-hexo-blog/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.4.0/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  



<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/my-hexo-blog/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"yolindeng.github.io","root":"/my-hexo-blog/","version":"1.8.6","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"copy_btn":true,"image_zoom":{"enable":true},"lazyload":{"enable":true,"onlypost":false},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null}}};
  </script>
  <script  src="/my-hexo-blog/js/utils.js" ></script>
  <script  src="/my-hexo-blog/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 4.2.1"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/my-hexo-blog/">&nbsp;<strong>Deng</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/my-hexo-blog/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/my-hexo-blog/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/my-hexo-blog/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/my-hexo-blog/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/my-hexo-blog/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" href="javascript:">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner intro-2" id="background" parallax=true
         style="background: url('/my-hexo-blog/img/default.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="setup语法糖以及pinia的使用">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2022-05-10 17:25" pubdate>
        2022年5月10日 下午
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      3.2k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      52
       分钟
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid">
  <div class="row">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-md">
      <div class="container nopadding-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">setup语法糖以及pinia的使用</h1>
            
            <div class="markdown-body">
              <h3 id="vue3-compositionAPI-相关-vue3-2-setup语法糖"><a href="#vue3-compositionAPI-相关-vue3-2-setup语法糖" class="headerlink" title="vue3 compositionAPI 相关 (vue3.2 setup语法糖)"></a>vue3 compositionAPI 相关 (vue3.2 setup语法糖)</h3><h4 id="1、文件结构"><a href="#1、文件结构" class="headerlink" title="1、文件结构"></a>1、文件结构</h4><p>  vue2中限制template只能有一个根元素，vue3没有限制  </p>
<h4 id="2、data"><a href="#2、data" class="headerlink" title="2、data"></a>2、data</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br> import &#123; reactive, ref, toRefs &#125; from &#39;vue&#39;<br>&#x2F;&#x2F; ref声明响应式数据，用于声明基本数据类型<br>const name &#x3D; ref(&#39;YoLin&#39;)<br>&#x2F;&#x2F; 修改<br>name.value &#x3D; &#39;Deng&#39;<br>&#x2F;&#x2F; reactive声明响应式数据，用于声明引用数据类型<br>const state &#x3D; reactive(&#123;<br>  name: &#39;YoLin&#39;,<br>  sex: &#39;男&#39;<br>&#125;)<br>&#x2F;&#x2F; 修改<br>state.name &#x3D; &#39;Deng&#39;<br><br>&#x2F;&#x2F; 使用toRefs解构<br>const &#123; name, sex &#125; &#x3D; toRefs(state)<br>&#x2F;&#x2F; 在template中可直接使用&#123;&#123; name &#125;&#125;、&#123;&#123; sex &#125;&#125;<br>&lt;&#x2F;script&gt;<br></code></pre></td></tr></table></figure>

<h4 id="3、method"><a href="#3、method" class="headerlink" title="3、method"></a>3、method</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &#x2F;&#x2F; 调用方法<br>  &lt;button @click&#x3D;&#39;changeName&#39;&gt;按钮&lt;&#x2F;button&gt;  <br>&lt;&#x2F;template&gt;<br><br>&lt;script setup&gt;<br>  import &#123; reactive &#125; from &#39;vue&#39;<br><br>  const state &#x3D; reactive(&#123;<br>    name: &#39;YoLin&#39;<br>  &#125;)<br><br>  &#x2F;&#x2F; 声明method方法<br>  const changeName &#x3D; () &#x3D;&gt; &#123;<br>    state.name &#x3D; &#39;Deng&#39;<br>  &#125;  <br>&lt;&#x2F;script&gt;<br></code></pre></td></tr></table></figure>

<h4 id="4、computed"><a href="#4、computed" class="headerlink" title="4、computed"></a>4、computed</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>  import &#123; computed, ref &#125; from &#39;vue&#39;<br>  <br>  let count &#x3D; ref(0)<br>  const doubuleCount &#x3D; computed(() &#x3D;&gt; &#123;<br>    return count.value * 2<br>  &#125;)<br> &lt;&#x2F;script&gt;<br></code></pre></td></tr></table></figure>

<h4 id="5、watch"><a href="#5、watch" class="headerlink" title="5、watch"></a>5、watch</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>  import &#123; watch, reactive &#125; from &#39;vue&#39;<br>  <br>  const state &#x3D; reactive(&#123;<br>    count: 1<br>  &#125;)<br>  const changeCount &#x3D; () &#x3D;&gt; &#123;<br>    state.count &#x3D; state.count * 2<br>  &#125;<br>  watch(() &#x3D;&gt; state.count, (newVal, oldVal) &#x3D;&gt; &#123;<br>    console.log(newVal)<br>  &#125;, &#123;<br>    immediate: true, &#x2F;&#x2F;立刻执行<br>    deep: true &#x2F;&#x2F; 深度监听<br>  &#125;)<br>&lt;&#x2F;script&gt;<br></code></pre></td></tr></table></figure>

<h4 id="6、props-父传子"><a href="#6、props-父传子" class="headerlink" title="6、props 父传子"></a>6、props 父传子</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs vue">子组件<br>&lt;template&gt;<br>  &lt;span&gt;&#123;&#123;props.name&#125;&#125;&lt;&#x2F;span&gt;<br>  &#x2F;&#x2F; 可省略【props.】<br>  &lt;span&gt;&#123;&#123;name&#125;&#125;&lt;&#x2F;span&gt;<br>&lt;&#x2F;template&gt;<br><br>&lt;script setup&gt;<br>  &#x2F;&#x2F; import &#123; defineProps &#125; from &#39;vue&#39;<br>  &#x2F;&#x2F; defineProps在&lt;script setup&gt;中自动可用，无需导入<br>  &#x2F;&#x2F; 需在.eslintrc.js文件中【globals】下配置【defineProps: true】<br><br>  &#x2F;&#x2F; 声明props<br>  const props &#x3D; defineProps(&#123;<br>    name: &#123;<br>      type: String,<br>      default: &#39;&#39;<br>    &#125;<br>  &#125;)  <br>&lt;&#x2F;script&gt;<br><br>父组件<br>引入子组件，组件会自动注册  <br>&lt;template&gt;<br>  &lt;child name&#x3D;&#39;Jerry&#39;&#x2F;&gt;  <br>&lt;&#x2F;template&gt;<br><br>&lt;script setup&gt;<br>  &#x2F;&#x2F; 引入子组件<br>  import child from &#39;.&#x2F;child.vue&#39;<br>&lt;&#x2F;script&gt;<br></code></pre></td></tr></table></figure>

<h4 id="7、emit-子传父"><a href="#7、emit-子传父" class="headerlink" title="7、emit 子传父"></a>7、emit 子传父</h4><p>子组件. </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;span&gt;&#123;&#123;props.name&#125;&#125;&lt;&#x2F;span&gt;<br>  &#x2F;&#x2F; 可省略【props.】<br>  &lt;span&gt;&#123;&#123;name&#125;&#125;&lt;&#x2F;span&gt;<br>  &lt;button @click&#x3D;&#39;changeName&#39;&gt;更名&lt;&#x2F;button&gt;<br>&lt;&#x2F;template&gt;<br><br>&lt;script setup&gt;<br>  &#x2F;&#x2F; import &#123; defineEmits, defineProps &#125; from &#39;vue&#39;<br>  &#x2F;&#x2F; defineEmits和defineProps在&lt;script setup&gt;中自动可用，无需导入<br>  &#x2F;&#x2F; 需在.eslintrc.js文件中【globals】下配置【defineEmits: true】、【defineProps: true】<br>	<br>  &#x2F;&#x2F; 声明props<br>  const props &#x3D; defineProps(&#123;<br>    name: &#123;<br>      type: String,<br>      default: &#39;&#39;<br>    &#125;<br>  &#125;) <br>  &#x2F;&#x2F; 声明事件<br>  const emit &#x3D; defineEmits([&#39;updateName&#39;])<br>  <br>  const changeName &#x3D; () &#x3D;&gt; &#123;<br>    &#x2F;&#x2F; 执行<br>    emit(&#39;updateName&#39;, &#39;Tom&#39;)<br>  &#125;<br>&lt;&#x2F;script&gt;<br></code></pre></td></tr></table></figure>

<p>父组件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;child :name&#x3D;&#39;state.name&#39; @updateName&#x3D;&#39;updateName&#39;&#x2F;&gt;  <br>&lt;&#x2F;template&gt;<br><br>&lt;script setup&gt;<br>  import &#123; reactive &#125; from &#39;vue&#39;<br>  &#x2F;&#x2F; 引入子组件<br>  import child from &#39;.&#x2F;child.vue&#39;<br><br>  const state &#x3D; reactive(&#123;<br>    name: &#39;YoLin&#39;<br>  &#125;)<br>  <br>  &#x2F;&#x2F; 接收子组件触发的方法<br>  const updateName &#x3D; (name) &#x3D;&gt; &#123;<br>    state.name &#x3D; name<br>  &#125;<br>&lt;&#x2F;script&gt;<br></code></pre></td></tr></table></figure>

<h4 id="8、v-model"><a href="#8、v-model" class="headerlink" title="8、v-model"></a>8、v-model</h4><p>支持绑定多个v-model，v-model 是v-model:modelValue的简写</p>
<p>绑定其他字段，如v-model:name</p>
<p>子组件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;span @click&#x3D;&quot;changeInfo&quot;&gt;我叫&#123;&#123; modelValue &#125;&#125;，今年&#123;&#123; age &#125;&#125;岁&lt;&#x2F;span&gt;<br>&lt;&#x2F;template&gt;<br><br>&lt;script setup&gt;<br>  &#x2F;&#x2F; import &#123; defineEmits, defineProps &#125; from &#39;vue&#39;<br>  &#x2F;&#x2F; defineEmits和defineProps在&lt;script setup&gt;中自动可用，无需导入<br>  &#x2F;&#x2F; 需在.eslintrc.js文件中【globals】下配置【defineEmits: true】、【defineProps: true】<br><br>  defineProps(&#123;<br>    modelValue: String,<br>    age: Number<br>  &#125;)<br><br>    const emit &#x3D; defineEmits([&#39;update:modelValue&#39;, &#39;update:age&#39;])<br>  const changeInfo &#x3D; () &#x3D;&gt; &#123;<br>    &#x2F;&#x2F; 触发父组件值更新<br>    emit(&#39;update:modelValue&#39;, &#39;Tom&#39;)<br>    emit(&#39;update:age&#39;, 30)<br>  &#125;<br>&lt;&#x2F;script&gt;<br></code></pre></td></tr></table></figure>

<p>父组件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &#x2F;&#x2F; v-model:modelValue简写为v-model<br>  &#x2F;&#x2F; 可绑定多个v-model<br>  &lt;child<br>    v-model&#x3D;&quot;state.name&quot;<br>    v-model:age&#x3D;&quot;state.age&quot;<br>  &#x2F;&gt;<br>&lt;&#x2F;template&gt;<br><br>&lt;script setup&gt;<br>  import &#123; reactive &#125; from &#39;vue&#39;<br>  &#x2F;&#x2F; 引入子组件<br>  import child from &#39;.&#x2F;child.vue&#39;<br><br>  const state &#x3D; reactive(&#123;<br>    name: &#39;Jerry&#39;,<br>    age: 20<br>  &#125;)<br>&lt;&#x2F;script&gt;<br></code></pre></td></tr></table></figure>

<h4 id="9、nextTick"><a href="#9、nextTick" class="headerlink" title="9、nextTick"></a>9、nextTick</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>  import &#123; nextTick &#125; from &#39;vue&#39;<br>	<br>  nextTick(() &#x3D;&gt; &#123;<br>    &#x2F;&#x2F; ...<br>  &#125;)<br>&lt;&#x2F;script&gt;<br></code></pre></td></tr></table></figure>

<h4 id="10、子组件ref变量和defineExpose"><a href="#10、子组件ref变量和defineExpose" class="headerlink" title="10、子组件ref变量和defineExpose"></a>10、子组件ref变量和defineExpose</h4><p>1、在标准的组件写法中，子组件的数据是默认隐式暴露给父组件的，但在script-setup模式下，所以的数据只是默认return给template使用，不会暴露到外部组件，所以父组件无法通过挂载ref变量来获取子组件的数据</p>
<p>2、如果想要调用子组件的数据，需要先在子组件显示的暴露出来，才能够正确的拿到，这个操作，就是由defineExpose来完成</p>
<p>子组件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;span&gt;&#123;&#123;state.name&#125;&#125;&lt;&#x2F;span&gt;<br>&lt;&#x2F;template&gt;<br><br>&lt;script setup&gt;<br>  import &#123; reactive, toRefs &#125; from &#39;vue&#39;<br>  &#x2F;&#x2F; defineExpose无需引入<br>  &#x2F;&#x2F; import &#123; defineExpose, reactive, toRefs &#125; from &#39;vue&#39;<br><br>  &#x2F;&#x2F; 声明state<br>  const state &#x3D; reactive(&#123;<br>    name: &#39;YoLin&#39;<br>  &#125;) <br>	<br>  &#x2F;&#x2F; 将方法、变量暴露给父组件使用，父组件才可通过ref API拿到子组件暴露的数据<br>  defineExpose(&#123;<br>    &#x2F;&#x2F; 解构state<br>    ...toRefs(state),<br>    &#x2F;&#x2F; 声明方法<br>    changeName () &#123;<br>      state.name &#x3D; &#39;Deng&#39;<br>    &#125;<br>  &#125;)<br>&lt;&#x2F;script&gt;<br></code></pre></td></tr></table></figure>

<p>父组件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;child ref&#x3D;&#39;childRef&#39;&#x2F;&gt;  <br>&lt;&#x2F;template&gt;<br><br>&lt;script setup&gt;<br>  import &#123; ref, nextTick &#125; from &#39;vue&#39;<br>  &#x2F;&#x2F; 引入子组件<br>  import child from &#39;.&#x2F;child.vue&#39;<br><br>  &#x2F;&#x2F; 子组件ref（TypeScript语法）<br>  const childRef &#x3D; ref&lt;InstanceType&lt;typeof child&gt;&gt;()<br>  <br>  &#x2F;&#x2F; nextTick<br>  nextTick(() &#x3D;&gt; &#123;<br>    &#x2F;&#x2F; 获取子组件name<br>    console.log(childRef.value.name)<br>    &#x2F;&#x2F; 执行子组件方法<br>    childRef.value.changeName()<br>  &#125;)<br>&lt;&#x2F;script&gt;<br></code></pre></td></tr></table></figure>

<h4 id="11、插槽"><a href="#11、插槽" class="headerlink" title="11、插槽"></a>11、插槽</h4><p>  子组件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &#x2F;&#x2F; 匿名插槽<br>  &lt;slot&#x2F;&gt;<br>  &#x2F;&#x2F; 具名插槽<br>  &lt;slot name&#x3D;&#39;title&#39;&#x2F;&gt;<br>  &#x2F;&#x2F; 作用域插槽<br>  &lt;slot name&#x3D;&quot;footer&quot; :scope&#x3D;&quot;state&quot; &#x2F;&gt;<br>&lt;&#x2F;template&gt;<br><br>&lt;script setup&gt;<br>  import &#123; useSlots, reactive &#125; from &#39;vue&#39;<br>  const state &#x3D; reactive(&#123;<br>    name: &#39;张三&#39;,<br>    age: &#39;25岁&#39;<br>  &#125;)<br>  <br>  const slots &#x3D; useSlots()<br>  &#x2F;&#x2F; 匿名插槽使用情况<br>  const defaultSlot &#x3D; reactive(slots.default &amp;&amp; slots.default().length)<br>  console.log(defaultSlot) &#x2F;&#x2F; 1<br>  &#x2F;&#x2F; 具名插槽使用情况<br>  const titleSlot &#x3D; reactive(slots.title &amp;&amp; slots.title().length)<br>  console.log(titleSlot) &#x2F;&#x2F; 3<br>&lt;&#x2F;script&gt;<br></code></pre></td></tr></table></figure>

<p>父组件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;child&gt;<br>    &#x2F;&#x2F; 匿名插槽<br>    &lt;span&gt;我是默认插槽&lt;&#x2F;span&gt;<br>    &#x2F;&#x2F; 具名插槽<br>    &lt;template #title&gt;<br>      &lt;h1&gt;我是具名插槽&lt;&#x2F;h1&gt;<br>      &lt;h1&gt;我是具名插槽&lt;&#x2F;h1&gt;<br>      &lt;h1&gt;我是具名插槽&lt;&#x2F;h1&gt;<br>    &lt;&#x2F;template&gt;<br>    &#x2F;&#x2F; 作用域插槽<br>    &lt;template #footer&#x3D;&quot;&#123; scope &#125;&quot;&gt;<br>      &lt;footer&gt;作用域插槽——姓名：&#123;&#123; scope.name &#125;&#125;，年龄&#123;&#123; scope.age &#125;&#125;&lt;&#x2F;footer&gt;<br>    &lt;&#x2F;template&gt;<br>  &lt;&#x2F;child&gt; <br>&lt;&#x2F;template&gt;<br><br>&lt;script setup&gt;<br>  &#x2F;&#x2F; 引入子组件<br>  import child from &#39;.&#x2F;child.vue&#39;<br>&lt;&#x2F;script&gt;<br></code></pre></td></tr></table></figure>

<h4 id="12、路由useRoute和useRouter"><a href="#12、路由useRoute和useRouter" class="headerlink" title="12、路由useRoute和useRouter"></a>12、路由useRoute和useRouter</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>  import &#123; useRoute, useRouter &#125; from &#39;vue-router&#39;<br>  &#x2F;&#x2F; 必须先声明<br>  const route &#x3D; useRoute()<br>  const router &#x3D; useRouter()<br>  <br>  &#x2F;&#x2F; 路由信息<br>  console.log(route.query)<br>  &#x2F;&#x2F; 路由跳转<br>  router.push(&#39;&#x2F;index&#39;)<br>&lt;&#x2F;script&gt;<br></code></pre></td></tr></table></figure>

<h4 id="13、路由导航守卫"><a href="#13、路由导航守卫" class="headerlink" title="13、路由导航守卫"></a>13、路由导航守卫</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>  import &#123; onBeforeRouteLeave, onBeforeRouteUpdate &#125; from &#39;vue-router&#39;<br>  &#x2F;&#x2F;添加一个导航守卫，当组件将要离开的时候触发<br> onBeforeRouteLeave((to, from, next) &#x3D;&gt; &#123;<br>	next()<br> &#125;)<br>  &#x2F;&#x2F; 添加一个导航守卫，当组件将要更新时触发<br>  onBeforeRouteUpdate((to, from, next) &#x3D;&gt;&#123;<br>    next()<br>  &#125;)<br>&lt;&#x2F;script&gt;<br></code></pre></td></tr></table></figure>

<h4 id="14、store"><a href="#14、store" class="headerlink" title="14、store"></a>14、store</h4><p>  <strong>vuex</strong></p>
<p>  *Vue3 中的Vuex不再提供辅助函数写法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>  import &#123; useStore &#125; from &#39;vuex&#39;<br>  import &#123; key &#125; from &#39;..&#x2F;store&#x2F;index&#39;<br><br>  &#x2F;&#x2F; 必须先声明调用<br>  const store &#x3D; useStore(key)<br>	<br>  &#x2F;&#x2F; 获取Vuex的state<br>  store.state.xxx<br><br>  &#x2F;&#x2F; 触发mutations的方法<br>  store.commit(&#39;fnName&#39;)<br><br>  &#x2F;&#x2F; 触发actions的方法<br>  store.dispatch(&#39;fnName&#39;)<br><br>  &#x2F;&#x2F; 获取Getters<br>  store.getters.xxx<br>&lt;&#x2F;script&gt;<br></code></pre></td></tr></table></figure>

<h4 id="15、pinia"><a href="#15、pinia" class="headerlink" title="15、pinia"></a>15、pinia</h4><p> <code>Pinia</code> 就是 <code>Vuex 5</code> ，<code>Pinia</code> 的优点：</p>
<ul>
<li><p>1、同时支持 Composition Api 和 Options api 的语法；</p>
</li>
<li><p>2、去掉 mutations ，只有 state 、getters 和 actions ；</p>
</li>
<li><p>3、不支持嵌套的模块，通过组合 store 来代替；</p>
</li>
</ul>
<p>*4、更完善的typescript支持</p>
<ul>
<li>5、清晰、显式的代码拆分</li>
</ul>
<p>安装：</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile"><span class="hljs-comment"># 使用 npm</span><br>npm install pinia<br><br><span class="hljs-comment"># 使用 yarn</span><br>yarn <span class="hljs-keyword">add</span><span class="bash"> pinia</span><br></code></pre></td></tr></table></figure>

<p>main.js引入</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> App <span class="hljs-keyword">from</span> <span class="hljs-string">'./App.vue'</span><br><span class="hljs-keyword">import</span> &#123; createApp &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span><br><span class="hljs-keyword">import</span> &#123; createPinia &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span><br><br><span class="hljs-keyword">const</span> app = createApp(App)<br>app.use(createPinia())<br>app.mount(<span class="hljs-string">'#app'</span>)<br></code></pre></td></tr></table></figure>

<p>配置store.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; defineStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span><br><br><span class="hljs-comment">// defineStore 调用后返回一个函数，调用该函数获得 Store 实体</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useStore = defineStore(&#123;<br>  <span class="hljs-comment">// id: 必须，在所有 Store 中唯一</span><br>  id: <span class="hljs-string">'globalState'</span>,<br>  <span class="hljs-comment">// state: 返回对象的函数</span><br>  state: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> (&#123;<br>    count: <span class="hljs-number">1</span>,<br>    data: &#123;<br>      name: <span class="hljs-string">'Jerry'</span>,<br>      sex: <span class="hljs-string">'男'</span><br>    &#125;<br>  &#125;),<br>  <span class="hljs-comment">// getter 第一个参数是 state，是当前的状态，也可以使用 this 获取状态</span><br>  <span class="hljs-comment">// getter 中也可以访问其他的 getter，或者是其他的 Store</span><br>  getters: &#123;<br>    <span class="hljs-comment">// 通过 state 获取状态</span><br>    doubleCount: <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> state.count * <span class="hljs-number">2</span>,<br>    <span class="hljs-comment">// 通过 this 获取状态（注意this指向）</span><br>    tripleCount() &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.count * <span class="hljs-number">3</span><br>    &#125;<br>  &#125;,<br>  actions: &#123;<br>    updateData (newData, count) &#123;<br>      <span class="hljs-comment">// 使用 this 直接修改</span><br>      <span class="hljs-keyword">this</span>.data = &#123; ...newData &#125;<br>      <span class="hljs-keyword">this</span>.count = count<br>      <br>      <span class="hljs-comment">// 使用 $patch 修改多个值</span><br>      <span class="hljs-keyword">this</span>.$patch(&#123;<br>        data: &#123; ...newData &#125;,<br>        count<br>      &#125;)<br>    &#125;<br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure>

<p>使用store</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &#x2F;&#x2F; 获取 store 的 state<br>  &lt;p&gt;姓名：&#123;&#123;store.data.name&#125;&#125;&lt;&#x2F;p&gt;<br>  &lt;p&gt;性别：&#123;&#123;store.data.sex&#125;&#125;&lt;&#x2F;p&gt;<br>  <br>  &#x2F;&#x2F; 调用 mutations 方法 &#x2F; 修改 store<br>  &lt;button @click&#x3D;&#39;update&#39;&gt;修改用户信息&lt;&#x2F;button&gt;<br>  <br>  &#x2F;&#x2F; 获取 getter<br>  &lt;p&gt;获取getter：&#123;&#123;store.doubleCount&#125;&#125;&lt;&#x2F;p&gt;<br>&lt;&#x2F;template&gt;<br><br>&lt;script setup&gt;<br>  import &#123; useStore &#125; from &#39;@store&#x2F;store.js&#39;<br>  const store &#x3D; useStore()<br>  <br>  function update () &#123;<br>    &#x2F;&#x2F; 通过 actions 定义的方法修改 state<br>    store.updateData(&#123; name: &#39;Tom&#39;, sex: &#39;女&#39; &#125;)<br>    <br>    &#x2F;&#x2F; 通过 store 直接修改<br>    store.data &#x3D; &#123; name: &#39;Tom&#39;, sex: &#39;女&#39; &#125;<br>    <br>    &#x2F;&#x2F; 同时改变多个状态<br>    store.$patch((state) &#x3D;&gt; &#123;<br>      state.data &#x3D; &#123; name: &#39;Tom&#39;, sex: &#39;女&#39; &#125;<br>      state.count &#x3D; 2<br>    &#125;)<br>  &#125;<br>&lt;&#x2F;script&gt;<br><br>&lt;style lang&#x3D;&quot;scss&quot; scoped&gt;<br>&lt;&#x2F;style&gt;<br></code></pre></td></tr></table></figure>

<p>其他方法</p>
<p>1、$state可以替换store的整个state</p>
<p>2、重制状态， <code>$reset()</code> 方法将状态重置为初始值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> store = useStore()<br>store.$state = &#123;&#125;<br>store.$reset()<br></code></pre></td></tr></table></figure>

<h4 id="16、声明周期"><a href="#16、声明周期" class="headerlink" title="16、声明周期"></a>16、声明周期</h4><p>通过在生命周期钩子前面加上 “on” 来访问组件的生命周期钩子。</p>
<p>Option API: beforeCreate、created、beforeMount、mounted、beforeUnmount(原vue2的beforeDestroy)、unmounted(原vue2的destroyed)、errorCaptured<br>activated、deactivated(在keep-alive标签下才有)</p>
<p>renderTracked(新增，状态跟踪, 每次渲染后重新收集响应式依赖)、renderTriggered(新增、状态触发, 每次触发页面重新渲染时自动执行), 新增的这两个用于调试使用</p>
<p>Composition API: setup中不需要beforeCreate 和 created, 其余只需要在Option API名称前面加上“on”</p>
<h4 id="17、原型绑定与组件内使用"><a href="#17、原型绑定与组件内使用" class="headerlink" title="17、原型绑定与组件内使用"></a>17、原型绑定与组件内使用</h4><p>main.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; createApp &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span><br><span class="hljs-keyword">import</span> App <span class="hljs-keyword">from</span> <span class="hljs-string">'./App.vue'</span><br><span class="hljs-keyword">const</span> app = createApp(App)<br><br><span class="hljs-comment">// 获取原型</span><br><span class="hljs-keyword">const</span> prototype = app.config.globalProperties<br><br><span class="hljs-comment">// 绑定参数</span><br>prototype.name = <span class="hljs-string">'Jerry'</span><br></code></pre></td></tr></table></figure>

<p>组件内使用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>  import &#123; getCurrentInstance &#125; from &#39;vue&#39;<br><br>  &#x2F;&#x2F; 获取原型<br>  const &#123; proxy &#125; &#x3D; getCurrentInstance()<br>  <br>  &#x2F;&#x2F; 输出<br>  console.log(proxy.name)<br>&lt;&#x2F;script&gt;<br></code></pre></td></tr></table></figure>

<h4 id="18、V-bind-css-变量注入"><a href="#18、V-bind-css-变量注入" class="headerlink" title="18、V-bind() css 变量注入"></a>18、V-bind() css 变量注入</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;span&gt;Jerry&lt;&#x2F;span&gt;<br>&lt;&#x2F;template&gt;<br><br>&lt;script setup&gt;<br>  import &#123; ref, reactive &#125; from &#39;vue&#39;<br>  &#x2F;&#x2F; prop接收样式<br>  const props &#x3D; defineProps(&#123;<br>    border: &#123;<br>      type: String,<br>      default: &#39;1px solid yellow&#39;<br>    &#125;<br>  &#125;)<br>  <br>  &#x2F;&#x2F; 常量声明样式<br>  const background &#x3D; &#39;red&#39;<br>  <br>  &#x2F;&#x2F; 响应式数据声明样式<br>  const color &#x3D; ref(&#39;blue&#39;)<br>  const style &#x3D; reactive(&#123;<br>    opacity: &#39;0.8&#39;<br>  &#125;)<br>&lt;&#x2F;script&gt;<br><br>&lt;style lang&#x3D;&quot;scss&quot; scoped&gt;<br>  span &#123;<br>    &#x2F;&#x2F; 使用常量声明的样式<br>    background: v-bind(background);<br>    <br>    &#x2F;&#x2F; 使用响应式数据声明的样式<br>    color: v-bind(color);<br>    opacity: v-bind(&#39;style.opacity&#39;);<br>    <br>    &#x2F;&#x2F; 使用prop接收的样式<br>    border: v-bind(&#39;props.border&#39;);<br>  &#125;<br>&lt;&#x2F;style&gt;<br></code></pre></td></tr></table></figure>

<h4 id="19、Provide-和inject"><a href="#19、Provide-和inject" class="headerlink" title="19、Provide 和inject"></a>19、Provide 和inject</h4><p>  父组件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;child&#x2F;&gt;<br>&lt;&#x2F;template&gt;<br><br>&lt;script setup&gt;<br>  import &#123; provide &#125; from &#39;vue&#39;<br>  import &#123; ref, watch &#125; from &#39;vue&#39;<br>  &#x2F;&#x2F; 引入子组件<br>  import child from &#39;.&#x2F;child.vue&#39;<br><br>  let name &#x3D; ref(&#39;Jerry&#39;)<br>  &#x2F;&#x2F; 声明provide<br>  provide(&#39;provideState&#39;, &#123;<br>    name,<br>    changeName: () &#x3D;&gt; &#123;<br>      name.value &#x3D; &#39;Tom&#39;<br>    &#125;<br>  &#125;)<br><br>  &#x2F;&#x2F; 监听name改变<br>  watch(name, () &#x3D;&gt; &#123;<br>    console.log(&#96;name变成了$&#123;name&#125;&#96;)<br>    setTimeout(() &#x3D;&gt; &#123;<br>      console.log(name.value) &#x2F;&#x2F; Tom<br>    &#125;, 1000)<br>  &#125;)<br>&lt;&#x2F;script&gt;<br></code></pre></td></tr></table></figure>

<p>子组件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>  import &#123; inject &#125; from &#39;vue&#39;<br>	&#x2F;&#x2F; 注入<br>  const provideState &#x3D; inject(&#39;provideState&#39;)<br>  <br>  &#x2F;&#x2F; 子组件触发name改变<br>  provideState.changeName()<br>&lt;&#x2F;script&gt;<br></code></pre></td></tr></table></figure>

<h4 id="20、对await-的支持"><a href="#20、对await-的支持" class="headerlink" title="20、对await 的支持"></a>20、对await 的支持</h4><p>不必再配合 async 就可以直接使用 await 了，这种情况下，组件的 setup 会自动变成 async setup </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script setup&gt;<br>  const post &#x3D; await fetch(&#39;&#x2F;api&#39;).then(() &#x3D;&gt; &#123;&#125;)<br>&lt;&#x2F;script&gt;<br></code></pre></td></tr></table></figure>

<h4 id="21、定义组件的name"><a href="#21、定义组件的name" class="headerlink" title="21、定义组件的name"></a>21、定义组件的name</h4><p>用单独的<code>&lt;script&gt;</code>块来定义</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;script&gt;<br>  export default &#123;<br>    name: &#39;ComponentName&#39;,<br>  &#125;<br>&lt;&#x2F;script&gt;<br></code></pre></td></tr></table></figure>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/my-hexo-blog/categories/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/">前端基础</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/my-hexo-blog/tags/javaScript/">javaScript</a>
                    
                      <a class="hover-with-bg" href="/my-hexo-blog/tags/vue/">vue</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" target="_blank" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！</p>
              
              
                <div class="post-prevnext row">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/my-hexo-blog/2022/08/11/%E4%BD%8E%E4%BB%A3%E7%A0%81%E5%8F%AF%E8%A7%86%E5%8C%96%E6%8B%96%E6%8B%BD%E7%BC%96%E8%BE%91%E5%99%A8%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%A1%88/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">低代码可视化拖拽编辑器实现方案</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/my-hexo-blog/2022/05/06/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/">
                        <span class="hidden-mobile">前端性能优化</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
              <!-- Comments -->
              <article class="comments" id="comments">
                
                
  <div id="vcomments"></div>
  <script type="text/javascript">
    Fluid.utils.waitElementVisible('vcomments', function() {
      Fluid.utils.createScript('https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js', function () {
        new Valine({
          el: "#vcomments",
          app_id: "aM4FTi8OwV8tqiH5UYYBRzPC-gzGzoHsz",
          app_key: "sl2Tj8M46WmXRF81AA6UO14j",
          placeholder: "说点什么",
          path: window.location.pathname,
          avatar: "retro",
          meta: ["nick","mail","link"],
          pageSize: "10",
          lang: "zh-CN",
          highlight: false,
          recordIP: false,
          serverURLs: "",
        });
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the
    <a href="https://valine.js.org" target="_blank" rel="nofollow noopener noopener">comments powered by Valine.</a>
  </noscript>


              </article>
            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="" target="_blank" rel="nofollow noopener"><span>YoLin</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Deng</span></a> 
  </div>
  
  <div class="statistics">
    
    

    
      
        <!-- 不蒜子统计PV -->
        <span id="busuanzi_container_site_pv" style="display: none">
            总访问量 
            <span id="busuanzi_value_site_pv"></span>
             次
          </span>
      
      
        <!-- 不蒜子统计UV -->
        <span id="busuanzi_container_site_uv" style="display: none">
            总访客数 
            <span id="busuanzi_value_site_uv"></span>
             人
          </span>
      
    
  </div>


  

  
</footer>

<!-- SCRIPTS -->

  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":200})
    NProgress.start()
    document.addEventListener('DOMContentLoaded', function() {
      window.NProgress && window.NProgress.inc();
    })
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" ></script>
<script  src="/my-hexo-blog/js/debouncer.js" ></script>
<script  src="/my-hexo-blog/js/events.js" ></script>
<script  src="/my-hexo-blog/js/plugins.js" ></script>

<!-- Plugins -->


  
    <script  src="/my-hexo-blog/js/lazyload.js" ></script>
  



  



  <script  src="https://cdn.jsdelivr.net/npm/tocbot@4.12.0/dist/tocbot.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.0/anchor.min.js" ></script>



  <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js" ></script>



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>




  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>



  <script  src="/my-hexo-blog/js/local-search.js" ></script>
  <script>
    (function () {
      var path = "/my-hexo-blog/local-search.xml";
      var inputArea = document.querySelector("#local-search-input");
      inputArea.onclick = function () {
        searchFunc(path, 'local-search-input', 'local-search-result');
        this.onclick = null
      }
    })()
  </script>















<!-- 主题的启动项 保持在最底部 -->
<script  src="/my-hexo-blog/js/boot.js" ></script>



</body>
</html>
